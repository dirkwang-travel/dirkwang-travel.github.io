/* --- PDF 列印樣式 (修正分頁邏輯) --- */
        .screen-hidden { display: none; }

        @media print {
            @page { margin: 0; size: A4; } /* 邊界設為 0 以滿版列印背景 */
            
            /* 1. 全局強制列印背景顏色與圖形 */
            body { 
                -webkit-print-color-adjust: exact !important; 
                print-color-adjust: exact !important; 
            }

            /* 2. 隱藏不必要的 UI */
            .app-header, .mobile-nav-item, .bookmark-tab, .bookmark-func, .bookmark-day, 
            .action-btn, .add-trip-card, .memo-add, button, .ph-x, .ph-trash, .ph-caret-down,
            .mobile-nav-item, .bookmark-add, .ticket-separator + div > button,
            .hidden.sm\:flex.w-16.sm\:w-20, .sm\:hidden.fixed.bottom-0 {
                display: none !important;
            }

            /* 3. 關鍵：解除所有父層容器的 Flex 和高度限制，允許內容自然流動 */
            body, #app, .notebook-view-active, 
            .w-full.h-full.max-w-5xl, .flex-1.bg-white {
                background-color: white !important;
                height: auto !important;
                min-height: 0 !important;
                overflow: visible !important;
                display: block !important; /* 破壞 Flexbox */
                position: static !important;
                width: 100% !important;
                max-width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }

            /* 內容區塊寬度 */
            .max-w-3xl {
                max-width: 100% !important;
                width: 100% !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            /* 4. 封面設定 (恢復色彩) */
            .kraft-cover {
                display: block !important;
                position: relative !important;
                height: auto !important;
                min-height: 250px; /* 確保封面有足夠高度 */
                width: 100% !important;
                margin-bottom: 0 !important;
                padding: 3rem 2rem !important; /* 增加內距 */
                
                /* 強制背景列印 */
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                
                color: white !important; /* 文字恢復白色 */
                page-break-after: always !important; /* 封面後換頁 */
                break-after: page !important;
            }
            .kraft-cover * { color: white !important; text-shadow: 0 1px 2px rgba(0,0,0,0.3); } 
            .kraft-cover .text-gray-700 { color: white !important; } /* 總金額顏色修正 */
            .kraft-cover .bg-white\/90 { background-color: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.4) !important; } /* 總金額框框透明化 */
            .kraft-cover button, .kraft-cover .absolute.top-4 { display: none !important; }

            /* 5. 內容區 (恢復紙張質感) */
            .paper-texture {
                /* 恢復米色背景變數 */
                background-color: var(--paper-bg) !important;
                /* 恢復橫線 */
                background-image: linear-gradient(var(--line-color) 1px, transparent 1px) !important; 
                background-size: 100% 2rem !important;
                
                height: auto !important;
                overflow: visible !important;
                padding: 0 !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            /* 6. 強制顯示所有天數 */
            .screen-hidden { display: block !important; }

            /* 7. 分頁邏輯 (Day Container) */
            .day-container {
                display: block !important;
                position: relative !important;
                margin-top: 0 !important;
                padding: 2rem 3rem !important; /* 增加左右留白 */
                
                /* 強制換頁設定 */
                page-break-after: always !important;
                break-after: page !important;
                
                /* 避免內容被切斷 */
                page-break-inside: auto; 
            }
            
            /* 最後一天不需要換頁 */
            .day-container:last-child {
                page-break-after: auto !important;
                break-after: auto !important;
            }

            /* 8. 防止項目內部被切斷 & 恢復項目背景色 */
            .group\/item, .boarding-pass, .memo-accommodation {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                box-shadow: none !important;
                margin-bottom: 1rem !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            /* 確保卡片背景色正確 */
            .memo-accommodation { background-color: #f0f9ff !important; border: 1px solid #bae6fd !important; }
            .memo-day { background-color: #fff7ed !important; border: 1px solid #fed7aa !important; }
            .boarding-pass { background-color: white !important; border: 1px solid #e5e7eb !important; border-left: 6px solid var(--accent-color) !important; }
            .bg-white { background-color: white !important; }

            /* 9. 輸入框美化 */
            input, textarea, select {
                border: none !important;
                border-bottom: 1px dashed #aaa !important;
                background: transparent !important;
                appearance: none;
                padding: 0 2px !important;
                color: #333 !important; /* 深灰色字體 */
                font-weight: bold;
            }
            
            /* 10. 移除多餘樣式 */
            .shadow-2xl, .shadow-xl { box-shadow: none !important; }
            .rounded-lg { border-radius: 0 !important; }
        }
